<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>18~22번 단어 시험</title>
<style>
  body{
    margin:0;
    background:#0b1220;
    color:#fff;
    font-family:system-ui, -apple-system, "Noto Sans KR", sans-serif;
    height:100vh;
    overflow:hidden;
    user-select:none;
    touch-action: manipulation;
  }
  #wrap{
    max-width:480px;
    margin:0 auto;
    height:100vh;
    display:flex;
    flex-direction:column;
    padding-bottom: env(safe-area-inset-bottom);
  }
  header{
    padding:14px;
    background:#111a2b;
    border-bottom:1px solid rgba(255,255,255,.08);
  }
  #english{
    font-size:22px;
    font-weight:800;
    letter-spacing:.2px;
  }
  #progress{
    margin-top:6px;
    font-size:13px;
    opacity:.85;
  }
  #game{
    flex:1;
    position:relative;
    overflow:hidden;
    background:#0f172a;
  }
  .floor{
    position:absolute;
    bottom:0; left:0; right:0;
    height:60px;
    background:rgba(255,80,80,.22);
    border-top:1px solid rgba(255,80,80,.45);
    text-align:center;
    line-height:60px;
    font-size:13px;
    z-index:2;
    pointer-events:none;
  }
  .choice{
    position:absolute;
    left:10px; right:10px;
    height:56px;
    background:#1e293b;
    border-radius:14px;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    padding:0 10px;
    font-size:18px;
    font-weight:800;
    cursor:pointer;
    border:1px solid rgba(255,255,255,.10);
    box-shadow: 0 10px 25px rgba(0,0,0,.25);
    z-index:1;
    transition: transform .08s ease, background .12s ease;
  }
  .choice:active{ transform: scale(.98); }
  .choice.good{ background:#065f46; border-color: rgba(94,234,212,.35); }
  .choice.bad{ background:#7f1d1d; border-color: rgba(251,113,133,.55); }

  #overlay{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,.72);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:18px;
    z-index:3;
  }
  .card{
    background:#111a2b;
    padding:20px;
    border-radius:18px;
    width:100%;
    max-width:420px;
    text-align:center;
    border:1px solid rgba(255,255,255,.10);
    box-shadow: 0 18px 50px rgba(0,0,0,.35);
  }
  .card h2{
    margin:0 0 10px;
    font-size:20px;
  }
  .card p{
    margin:0 0 12px;
    font-size:13px;
    opacity:.9;
    line-height:1.5;
  }
  button{
    width:100%;
    margin-top:12px;
    padding:12px;
    font-size:15px;
    font-weight:900;
    border-radius:12px;
    border:none;
    background:#38bdf8;
    cursor:pointer;
  }
  button.secondary{
    background:#1f2a44;
    color:#fff;
    border:1px solid rgba(255,255,255,.10);
  }
</style>
</head>
<body>

<div id="wrap">
  <header>
    <div id="english">단어 시험</div>
    <div id="progress"></div>
  </header>

  <div id="game">
    <div class="floor">바닥 도달 = 즉시 불합격</div>

    <div id="overlay">
      <div class="card">
        <h2 id="ovTitle">단어 시험 시작</h2>
        <p id="ovText">
          화면 위 영어 단어에 맞는 한국어를 터치하세요.<br>
          <b>4개 중 하나라도 바닥에 닿으면 즉시 불합격</b>입니다.
        </p>
        <button id="startBtn">시험 시작</button>
        <button id="restartBtn" class="secondary" style="display:none;">다시 시작</button>
      </div>
    </div>
  </div>
</div>

<script>
/* =========================
   ✅ 단어 목록(내용만 바꾸면 됨)
   ========================= */
const words = [
  { en: "participating", ko: "참여하는" },
  { en: "chosen", ko: "선택된" },
  { en: "looking forward", ko: "기대하다" },
  { en: "introducing", ko: "소개하는" },
  { en: "unique", ko: "독특한" },
  { en: "handmade", ko: "수제의" },
  { en: "baskets", ko: "바구니" },
  { en: "organizing", ko: "조직하는" },
  { en: "exhibition plan", ko: "전시 계획" },
  { en: "happy", ko: "기쁜" },
  { en: "inform", ko: "알리다" },
  { en: "assigned", ko: "배정된" },
  { en: "table", ko: "테이블" },
  { en: "visitors", ko: "방문객들" },
  { en: "easily", ko: "쉽게" },
  { en: "located", ko: "위치한" },
  { en: "entrance", ko: "입구" },
  { en: "special", ko: "특별한" },
  { en: "requirements", ko: "요구 사항" },
  { en: "further", ko: "추가적인" },
  { en: "assistance", ko: "도움" },
  { en: "feel free", ko: "자유롭게 하다" },
  { en: "contact", ko: "연락하다" },
  { en: "in advance", ko: "미리" },
  { en: "Sincerely", ko: "진심으로" },

  { en: "shed", ko: "창고" },
  { en: "cold", ko: "차가운" },
  { en: "damp", ko: "축축한" },
  { en: "thick", ko: "짙은" },
  { en: "smell", ko: "냄새" },
  { en: "wood", ko: "나무" },
  { en: "earth", ko: "흙" },
  { en: "dark", ko: "어두운" },
  { en: "make out", ko: "식별하다" },
  { en: "moving", ko: "움직이는" },
  { en: "shadows", ko: "그림자" },
  { en: "ask", ko: "묻다" },
  { en: "voice", ko: "목소리" },
  { en: "shaking", ko: "떨리는" },
  { en: "heart", ko: "심장" },
  { en: "fast", ko: "빠른" },
  { en: "figure", ko: "형체" },
  { en: "beam", ko: "광선" },
  { en: "crack", ko: "균열" },
  { en: "rabbit", ko: "토끼" },
  { en: "laugh", ko: "웃다" },
  { en: "escape", ko: "빠져나가다" },
  { en: "stare", ko: "응시하다" },
  { en: "curious", ko: "호기심 많은" },
  { en: "scared", ko: "겁먹은" },
  { en: "pause", ko: "멈추다" },
  { en: "hop", ko: "뛰다" },
  { en: "disappear", ko: "사라지다" },
  { en: "smile", ko: "미소" },
  { en: "at ease", ko: "편안한" },
  { en: "feel", ko: "느끼다" },

  { en: "improving", ko: "향상시키는" },
  { en: "gestural", ko: "몸짓의" },
  { en: "communication", ko: "의사소통" },
  { en: "nod", ko: "고개를 끄덕이다" },
  { en: "shake hands", ko: "손을 흔들다" },
  { en: "complement", ko: "보완하다" },
  { en: "spoken", ko: "말로 하는" },
  { en: "layers", ko: "층" },
  { en: "honesty", ko: "정직" },
  { en: "atmosphere", ko: "분위기" },
  { en: "trust", ko: "신뢰" },
  { en: "openness", ko: "개방성" },
  { en: "collaboration", ko: "협력" },
  { en: "palms", ko: "손바닥" },
  { en: "facing up", ko: "위를 향한" },
  { en: "simple", ko: "간단한" },
  { en: "powerful", ko: "강력한" },
  { en: "comfortable", ko: "편안한" },
  { en: "overgesturing", ko: "과도하게 몸짓을 사용함" },
  { en: "distract", ko: "방해하다" },
  { en: "chaos", ko: "혼란" },
  { en: "balance", ko: "균형" },
  { en: "highlight", ko: "강조하다" },
  { en: "overshadow", ko: "가리다" },

  { en: "gene editing", ko: "유전자 편집" },
  { en: "humans", ko: "인간들" },
  { en: "safe", ko: "안전한" },
  { en: "effective", ko: "효과적인" },
  { en: "logical", ko: "논리적인" },
  { en: "preferable", ko: "바람직한" },
  { en: "disease-causing", ko: "질병을 일으키는" },
  { en: "mutations", ko: "돌연변이" },
  { en: "earliest", ko: "가장 이른" },
  { en: "harmful", ko: "해로운" },
  { en: "serious", ko: "심각한" },
  { en: "transform", ko: "변형하다" },
  { en: "embryo", ko: "배아" },
  { en: "mutated", ko: "돌연변이가 된" },
  { en: "normal", ko: "정상적인" },
  { en: "superior", ko: "우수한" },
  { en: "temptations", ko: "유혹" },
  { en: "upgrade", ko: "향상시키다" },
  { en: "lifetime", ko: "평생" },
  { en: "risk", ko: "위험" },
  { en: "heart disease", ko: "심장병" },
  { en: "cancer", ko: "암" },
  { en: "beneficial", ko: "유익한" },
  { en: "features", ko: "특징" },
  { en: "strength", ko: "힘" },
  { en: "mental abilities", ko: "정신 능력" },
  { en: "physical", ko: "신체적인" },
  { en: "characteristics", ko: "특성" },
  { en: "eye color", ko: "눈 색깔" },
  { en: "hair color", ko: "머리 색깔" },
  { en: "pursuit", ko: "추구" },
  { en: "perfection", ko: "완벽함" },
  { en: "slippery slope", ko: "미끄러운 경사로" },
  { en: "may not like", ko: "좋아하지 않을지도 모른다" },
  { en: "end up", ko: "끝나다" },

  { en: "grade school", ko: "초등학교" },
  { en: "collection", ko: "모음" },
  { en: "certainties", ko: "확실성" },
  { en: "natural world", ko: "자연 세계" },
  { en: "earth", ko: "지구" },
  { en: "sun", ko: "태양" },
  { en: "DNA", ko: "DNA" },
  { en: "carries", ko: "전달하다" },
  { en: "information", ko: "정보" },
  { en: "organism", ko: "유기체" },
  { en: "practice", ko: "실천" },
  { en: "realize", ko: "깨닫다" },
  { en: "facts", ko: "사실" },
  { en: "hard won", ko: "어렵게 얻어진" },
  { en: "succession", ko: "연속" },
  { en: "logical", ko: "논리적인" },
  { en: "inferences", ko: "추론" },
  { en: "observations", ko: "관찰" },
  { en: "experiments", ko: "실험" },
  { en: "process", ko: "과정" },
  { en: "reducing", ko: "줄이다" },
  { en: "uncertainties", ko: "불확실성" },
  { en: "greater", ko: "더 큰" },
  { en: "lesser", ko: "더 작은" },
  { en: "knowledge", ko: "지식" },
  { en: "given", ko: "주어진" },
  { en: "piece", ko: "조각" },
  { en: "quite", ko: "꽤" },
  { en: "certain", ko: "확신하는" },
  { en: "fall", ko: "떨어지다" },
  { en: "tree", ko: "나무" },
  { en: "understanding", ko: "이해" },
  { en: "turbulent", ko: "난기류의" },
  { en: "fluid flow", ko: "유체 흐름" },
  { en: "work in progress", ko: "진행 중인 작업" },
  { en: "century", ko: "세기" },
  { en: "effort", ko: "노력" }
];

/* =========================
   게임 설정
   ========================= */
const PASS_MESSAGE = "18~22번 단어테스트 통과!";
const baseSpeed = 100;          // ✅ 전체 문항 동일 + 조금 더 느리게
const speedIncreasePer5 = 0;    // ✅ 속도 증가 제거(사용 안 함)
const floorHeight = 60;
const choiceHeight = 56;

/* =========================
   유틸
   ========================= */
function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1; i>0; i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

/* =========================
   DOM
   ========================= */
const gameEl = document.getElementById("game");
const englishEl = document.getElementById("english");
const progressEl = document.getElementById("progress");

const overlayEl = document.getElementById("overlay");
const ovTitle = document.getElementById("ovTitle");
const ovText = document.getElementById("ovText");
const startBtn = document.getElementById("startBtn");
const restartBtn = document.getElementById("restartBtn");

/* =========================
   상태
   ========================= */
let deck = [];
let idx = 0;
let speed = baseSpeed;

let choices = [];
let raf = null;
let running = false;
let lastTs = 0;

/* =========================
   오버레이
   ========================= */
function showOverlay(title, htmlText, showStart, showRestart){
  ovTitle.textContent = title;
  ovText.innerHTML = htmlText;
  overlayEl.style.display = "flex";
  startBtn.style.display = showStart ? "" : "none";
  restartBtn.style.display = showRestart ? "" : "none";
}

function hideOverlay(){
  overlayEl.style.display = "none";
}

/* =========================
   게임 흐름
   ========================= */
function resetGame(){
  deck = shuffle(words);
  idx = 0;
  speed = baseSpeed;
  progressEl.textContent = `0 / ${deck.length}`;
  englishEl.textContent = "단어 시험";
  clearChoices();
  stopLoop();
}

function startGame(){
  resetGame();
  hideOverlay();
  nextWord();
}

function nextWord(){
  if(idx >= deck.length){
    // ✅ 모두 통과 시 문구 출력
    stopLoop();
    clearChoices();
    showOverlay(
      "합격",
      `<b style="font-size:18px;">${PASS_MESSAGE}</b><br><br>총 <b>${deck.length}</b>단어를 모두 통과했습니다.`,
      false,
      true
    );
    return;
  }

// ✅ 속도 고정 (모든 단어 동일)
  speed = baseSpeed;

  const w = deck[idx];
  englishEl.textContent = w.en;
  progressEl.textContent = `${idx + 1} / ${deck.length}`;

  spawnChoices(w);
  startLoop();
}

function fail(reason){
  stopLoop();
  clearChoices();
  showOverlay(
    "불합격",
    `${reason}<br><br><b>규칙:</b> 오답 선택 또는 어떤 선택지든 바닥 도달 시 즉시 종료됩니다.`,
    false,
    true
  );
}

function pick(el){
  if(!running) return;
  if(el.dataset.correct !== "1"){
    el.classList.add("bad");
    fail("오답을 선택했습니다.");
    return;
  }
  el.classList.add("good");
  stopLoop();
  setTimeout(() => {
    idx += 1;
    nextWord();
  }, 200);
}

/* =========================
   선택지 생성/이동
   ========================= */
function clearChoices(){
  for(const el of choices){
    el.remove();
  }
  choices = [];
}

function spawnChoices(word){
  clearChoices();

  const correct = word.ko;
  const pool = words.map(x => x.ko).filter(ko => ko !== correct);
  const wrongs = shuffle(pool).slice(0, 3);
  const options = shuffle([correct, ...wrongs]);

  const startYs = [-220, -320, -420, -520];

  options.forEach((txt, i) => {
    const el = document.createElement("div");
    el.className = "choice";
    el.textContent = txt;

    el.dataset.correct = (txt === correct) ? "1" : "0";
    el._y = startYs[i];

    // 클릭/터치
    el.addEventListener("click", () => pick(el));
    el.addEventListener("touchstart", (e) => {
      e.preventDefault();
      pick(el);
    }, { passive:false });

    el.style.top = "0px";
    el.style.transform = `translateY(${el._y}px)`;

    gameEl.appendChild(el);
    choices.push(el);
  });
}

/* =========================
   루프
   ========================= */
function startLoop(){
  running = true;
  lastTs = performance.now();
  if(raf) cancelAnimationFrame(raf);
  raf = requestAnimationFrame(tick);
}

function stopLoop(){
  running = false;
  if(raf) cancelAnimationFrame(raf);
  raf = null;
}

function tick(ts){
  if(!running) return;
  const dt = (ts - lastTs) / 1000;
  lastTs = ts;

  const rect = gameEl.getBoundingClientRect();
  const bottomLimit = rect.height - floorHeight - choiceHeight;

  for(const el of choices){
    el._y += speed * dt;
    el.style.transform = `translateY(${el._y}px)`;
    if(el._y >= bottomLimit){
      fail("선택지가 바닥에 닿았습니다.");
      return;
    }
  }
  raf = requestAnimationFrame(tick);
}

/* =========================
   버튼
   ========================= */
startBtn.addEventListener("click", startGame);
restartBtn.addEventListener("click", () => {
  showOverlay(
    "단어 시험 시작",
    `화면 위 영어 단어에 맞는 한국어를 터치하세요.<br><b>4개 중 하나라도 바닥에 닿으면 즉시 불합격</b>입니다.`,
    true,
    false
  );
});

/* 초기 화면 */
showOverlay(
  "단어 시험 시작",
  `화면 위 영어 단어에 맞는 한국어를 터치하세요.<br><b>4개 중 하나라도 바닥에 닿으면 즉시 불합격</b>입니다.`,
  true,
  false
);
</script>

</body>
</html>


