<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>2025ë…„ 3ì›” ê³ 1 ëª¨ì˜ê³ ì‚¬ 31ë²ˆ ë…í•´ ë¹ˆì¹¸ ì¶”ë¡ </title>
<style>
  body{
    margin:0;
    background:#0b1220;
    color:#fff;
    font-family:system-ui, -apple-system, "Noto Sans KR", sans-serif;
    height:100vh;
    overflow:hidden;
    user-select:none;
    touch-action: manipulation;
  }
  #wrap{
    max-width:520px;
    margin:0 auto;
    height:100vh;
    display:flex;
    flex-direction:column;
    padding-bottom: env(safe-area-inset-bottom);
  }
  header{
    padding:14px;
    background:#111a2b;
    border-bottom:1px solid rgba(255,255,255,.08);
  }
  #topbar{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:12px;
  }
  #sentence{
    font-size:17px;
    font-weight:800;
    line-height:1.45;
    letter-spacing:.1px;
    flex:1;
  }
  #hud{
    display:flex;
    flex-direction:column;
    align-items:flex-end;
    gap:6px;
    min-width:120px;
  }
  #timer{
    font-size:18px;
    font-weight:900;
    padding:6px 10px;
    border-radius:12px;
    background:#0f172a;
    border:1px solid rgba(255,255,255,.10);
  }
  #timer.danger{
    background:rgba(255,80,80,.18);
    border-color: rgba(255,80,80,.45);
  }
  #progress{
    font-size:13px;
    opacity:.85;
  }

  #game{
    flex:1;
    position:relative;
    overflow:hidden;
    background:#0f172a;
  }
  .floor{
    position:absolute;
    bottom:0; left:0; right:0;
    height:60px;
    background:rgba(255,80,80,.22);
    border-top:1px solid rgba(255,80,80,.45);
    text-align:center;
    line-height:60px;
    font-size:13px;
    z-index:2;
    pointer-events:none;
  }
  .choice{
    position:absolute;
    left:10px; right:10px;
    height:56px;
    background:#1e293b;
    border-radius:14px;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    padding:0 10px;
    font-size:18px;
    font-weight:900;
    cursor:pointer;
    border:1px solid rgba(255,255,255,.10);
    box-shadow: 0 10px 25px rgba(0,0,0,.25);
    z-index:1;
    transition: transform .08s ease, background .12s ease;
  }
  .choice:active{ transform: scale(.98); }
  .choice.good{ background:#065f46; border-color: rgba(94,234,212,.35); }
  .choice.bad{ background:#7f1d1d; border-color: rgba(251,113,133,.55); }

  #overlay{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,.72);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:18px;
    z-index:3;
  }
  .card{
    background:#111a2b;
    padding:20px;
    border-radius:18px;
    width:100%;
    max-width:460px;
    text-align:center;
    border:1px solid rgba(255,255,255,.10);
    box-shadow: 0 18px 50px rgba(0,0,0,.35);
  }
  .card h2{
    margin:0 0 10px;
    font-size:20px;
  }
  .card p{
    margin:0 0 12px;
    font-size:13px;
    opacity:.9;
    line-height:1.55;
  }
  .skull{
    font-size:46px;
    line-height:1;
    margin:10px 0 4px;
  }
  button{
    width:100%;
    margin-top:12px;
    padding:12px;
    font-size:15px;
    font-weight:900;
    border-radius:12px;
    border:none;
    background:#38bdf8;
    cursor:pointer;
  }
  button.secondary{
    background:#1f2a44;
    color:#fff;
    border:1px solid rgba(255,255,255,.10);
  }
</style>
</head>
<body>

<div id="wrap">
  <header>
    <div id="topbar">
      <div id="sentence">ë…í•´ ë¹ˆì¹¸ ì¶”ë¡ </div>
      <div id="hud">
        <div id="timer">01:00</div>
        <div id="progress"></div>
      </div>
    </div>
  </header>

  <div id="game">
    <div class="floor">ë°”ë‹¥ ë„ë‹¬ = ì¦‰ì‹œ ë¶ˆí•©ê²©</div>

    <div id="overlay">
      <div class="card">
        <h2 id="ovTitle">ë…í•´ ë¹ˆì¹¸ ì¶”ë¡  ì‹œì‘</h2>
        <p id="ovText">
          ë¹ˆì¹¸(______)ì— ë“¤ì–´ê°ˆ ê°€ì¥ ì ì ˆí•œ ë‹¨ì–´ë¥¼ í„°ì¹˜í•˜ì„¸ìš”.<br>
          <b>ì˜¤ë‹µ ì„ íƒ / ì„ íƒì§€ ë°”ë‹¥ ë„ë‹¬ / 1ë¶„ íƒ€ì„ì•„ì›ƒ</b> ì‹œ ì¦‰ì‹œ ë¶ˆí•©ê²©ì…ë‹ˆë‹¤.
        </p>
        <button id="startBtn">ì‹œí—˜ ì‹œì‘</button>
        <button id="restartBtn" class="secondary" style="display:none;">ë‹¤ì‹œ ì‹œì‘</button>
      </div>
    </div>
  </div>
</div>

<script>
/* =========================
   âœ… 2025ë…„ 3ì›” ê³ 1 ëª¨ì˜ê³ ì‚¬ 31ë²ˆ (Plato) ë¹ˆì¹¸ ì¶”ë¡  ë¬¸ì œ ì„¸íŠ¸
   - sentence: í‘œì‹œí•  ë¬¸ì¥(ë¹ˆì¹¸ í¬í•¨)
   - answer: ì •ë‹µ
   - options: ë³´ê¸° 4ê°œ
   ========================= */
const questions = [
  {
    sentence: "Plato argued that when you see something that strikes you as beautiful, you are really just seeing a partial ______ of true beauty.",
    answer: "reflection",
    options: ["reflection","triangle","scent","route"]
  },
  {
    sentence: "True beauty, or what Plato calls the Form of Beauty, has no particular color, shape, or ______.",
    answer: "size",
    options: ["size","branch","pressure","liquid"]
  },
  {
    sentence: "Rather, it is an abstract idea, like the number ______.",
    answer: "five",
    options: ["five","tree","knee","map"]
  },
  {
    sentence: "You can make drawings of the number five in blue or red ink, big or small, but the number five itself has no physical ______.",
    answer: "form",
    options: ["form","joint","animal","weight"]
  },
  {
    sentence: "Although the idea of a triangle has no particular color or size, it somehow lies ______ each and every triangle you see.",
    answer: "within",
    options: ["within","in front","from A to B","off-and-on"]
  },
  {
    sentence: "Plato thought the same was true of beauty: the Form of Beauty somehow lies within each and every ______ thing you see.",
    answer: "beautiful",
    options: ["beautiful","capable","healthy","working"]
  }
];

/* =========================
   ê²Œì„ ì„¤ì •
   ========================= */
const PASS_MESSAGE = "ì¶•í•˜í•©ë‹ˆë‹¤. 2025ë…„ 3ì›” ê³ 1 ëª¨ì˜ê³ ì‚¬ 31ë²ˆ ë…í•´ ë¹ˆì¹¸ ì¶”ë¡  í†µê³¼!";
const baseSpeed = 110;
const floorHeight = 60;
const choiceHeight = 56;

const TOTAL_TIME_SEC = 60; // âœ… 1ë¶„ íƒ€ì´ë¨¸

/* =========================
   ìœ í‹¸
   ========================= */
function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1; i>0; i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}
function pad2(n){ return String(n).padStart(2,"0"); }
function fmtTime(sec){
  const m = Math.floor(sec/60);
  const s = sec%60;
  return `${pad2(m)}:${pad2(s)}`;
}

/* =========================
   DOM
   ========================= */
const gameEl = document.getElementById("game");
const sentenceEl = document.getElementById("sentence");
const progressEl = document.getElementById("progress");
const timerEl = document.getElementById("timer");

const overlayEl = document.getElementById("overlay");
const ovTitle = document.getElementById("ovTitle");
const ovText = document.getElementById("ovText");
const startBtn = document.getElementById("startBtn");
const restartBtn = document.getElementById("restartBtn");

/* =========================
   ìƒíƒœ
   ========================= */
let deck = [];
let idx = 0;
let speed = baseSpeed;

let choices = [];
let raf = null;
let running = false;
let lastTs = 0;

// âœ… íƒ€ì´ë¨¸
let remaining = TOTAL_TIME_SEC;
let timerInterval = null;

/* =========================
   ì˜¤ë²„ë ˆì´
   ========================= */
function showOverlay(title, htmlText, showStart, showRestart){
  ovTitle.textContent = title;
  ovText.innerHTML = htmlText;
  overlayEl.style.display = "flex";
  startBtn.style.display = showStart ? "" : "none";
  restartBtn.style.display = showRestart ? "" : "none";
}
function hideOverlay(){
  overlayEl.style.display = "none";
}

/* =========================
   íƒ€ì´ë¨¸
   ========================= */
function stopTimer(){
  if(timerInterval) clearInterval(timerInterval);
  timerInterval = null;
}
function resetTimer(){
  stopTimer();
  remaining = TOTAL_TIME_SEC;
  timerEl.textContent = fmtTime(remaining);
  timerEl.classList.remove("danger");
}
function startTimer(){
  stopTimer();
  timerInterval = setInterval(() => {
    if(!running) return;
    remaining -= 1;
    if(remaining < 0) remaining = 0;
    timerEl.textContent = fmtTime(remaining);
    if(remaining <= 10) timerEl.classList.add("danger");

    if(remaining <= 0){
      // âœ… íƒ€ì„ì•„ì›ƒ ë¶ˆí•©ê²© (í•´ê³¨ í‘œì‹œ)
      failTimeout();
    }
  }, 1000);
}

/* =========================
   ê²Œì„ íë¦„
   ========================= */
function resetGame(){
  deck = shuffle(questions);
  idx = 0;
  speed = baseSpeed;
  progressEl.textContent = `0 / ${deck.length}`;
  sentenceEl.textContent = "ë…í•´ ë¹ˆì¹¸ ì¶”ë¡ ";
  clearChoices();
  stopLoop();
  resetTimer();
}

function startGame(){
  resetGame();
  hideOverlay();
  running = true;
  startTimer();
  nextQ();
}

function nextQ(){
  if(idx >= deck.length){
    stopLoop();
    stopTimer();
    clearChoices();
    running = false;
    showOverlay(
      "í•©ê²©",
      `<b style="font-size:18px;">${PASS_MESSAGE}</b><br><br>ì´ <b>${deck.length}</b>ë¬¸ì œë¥¼ ëª¨ë‘ í†µê³¼í–ˆìŠµë‹ˆë‹¤.`,
      false,
      true
    );
    return;
  }

  speed = baseSpeed;

  const q = deck[idx];
  sentenceEl.textContent = q.sentence;
  progressEl.textContent = `${idx + 1} / ${deck.length}`;

  spawnChoices(q);
  startLoop();
}

function fail(reason){
  stopLoop();
  stopTimer();
  clearChoices();
  running = false;
  showOverlay(
    "ë¶ˆí•©ê²©",
    `${reason}<br><br><b>ê·œì¹™:</b> ì˜¤ë‹µ ì„ íƒ / ì„ íƒì§€ ë°”ë‹¥ ë„ë‹¬ / 1ë¶„ íƒ€ì„ì•„ì›ƒ ì‹œ ì¦‰ì‹œ ì¢…ë£Œë©ë‹ˆë‹¤.`,
    false,
    true
  );
}

function failTimeout(){
  // ì´ë¯¸ ì¢…ë£Œëœ ìƒíƒœë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
  if(!running) return;
  stopLoop();
  stopTimer();
  clearChoices();
  running = false;
  showOverlay(
    "ë¶ˆí•©ê²©",
    `<div class="skull">ğŸ’€</div>
     <b style="font-size:16px;">ì‹œê°„ ì´ˆê³¼(1ë¶„)ë¡œ ë¶ˆí•©ê²©</b><br><br>
     ë‹¤ìŒì—ëŠ” ë” ë¹ ë¥´ê²Œ!`,
    false,
    true
  );
}

function pick(el){
  if(!running) return;
  if(el.dataset.correct !== "1"){
    el.classList.add("bad");
    fail("ì˜¤ë‹µì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤.");
    return;
  }
  el.classList.add("good");
  stopLoop();
  setTimeout(() => {
    idx += 1;
    nextQ();
  }, 200);
}

/* =========================
   ì„ íƒì§€ ìƒì„±/ì´ë™
   ========================= */
function clearChoices(){
  for(const el of choices) el.remove();
  choices = [];
}

function spawnChoices(q){
  clearChoices();

  const correct = q.answer;
  const options = shuffle(q.options);

  const startYs = [-220, -320, -420, -520];

  options.forEach((txt, i) => {
    const el = document.createElement("div");
    el.className = "choice";
    el.textContent = txt;

    el.dataset.correct = (txt === correct) ? "1" : "0";
    el._y = startYs[i];

    el.addEventListener("click", () => pick(el));
    el.addEventListener("touchstart", (e) => {
      e.preventDefault();
      pick(el);
    }, { passive:false });

    el.style.top = "0px";
    el.style.transform = `translateY(${el._y}px)`;

    gameEl.appendChild(el);
    choices.push(el);
  });
}

/* =========================
   ë£¨í”„
   ========================= */
function startLoop(){
  lastTs = performance.now();
  if(raf) cancelAnimationFrame(raf);
  raf = requestAnimationFrame(tick);
}
function stopLoop(){
  if(raf) cancelAnimationFrame(raf);
  raf = null;
}
function tick(ts){
  if(!running) return;
  const dt = (ts - lastTs) / 1000;
  lastTs = ts;

  const rect = gameEl.getBoundingClientRect();
  const bottomLimit = rect.height - floorHeight - choiceHeight;

  for(const el of choices){
    el._y += speed * dt;
    el.style.transform = `translateY(${el._y}px)`;
    if(el._y >= bottomLimit){
      fail("ì„ íƒì§€ê°€ ë°”ë‹¥ì— ë‹¿ì•˜ìŠµë‹ˆë‹¤.");
      return;
    }
  }
  raf = requestAnimationFrame(tick);
}

/* =========================
   ë²„íŠ¼
   ========================= */
startBtn.addEventListener("click", startGame);
restartBtn.addEventListener("click", () => {
  showOverlay(
    "ë…í•´ ë¹ˆì¹¸ ì¶”ë¡  ì‹œì‘",
    `ë¹ˆì¹¸(______)ì— ë“¤ì–´ê°ˆ ê°€ì¥ ì ì ˆí•œ ë‹¨ì–´ë¥¼ í„°ì¹˜í•˜ì„¸ìš”.<br>
     <b>ì˜¤ë‹µ ì„ íƒ / ì„ íƒì§€ ë°”ë‹¥ ë„ë‹¬ / 1ë¶„ íƒ€ì„ì•„ì›ƒ</b> ì‹œ ì¦‰ì‹œ ë¶ˆí•©ê²©ì…ë‹ˆë‹¤.`,
    true,
    false
  );
  resetGame();
});

showOverlay(
  "ë…í•´ ë¹ˆì¹¸ ì¶”ë¡  ì‹œì‘",
  `ë¹ˆì¹¸(______)ì— ë“¤ì–´ê°ˆ ê°€ì¥ ì ì ˆí•œ ë‹¨ì–´ë¥¼ í„°ì¹˜í•˜ì„¸ìš”.<br>
   <b>ì˜¤ë‹µ ì„ íƒ / ì„ íƒì§€ ë°”ë‹¥ ë„ë‹¬ / 1ë¶„ íƒ€ì„ì•„ì›ƒ</b> ì‹œ ì¦‰ì‹œ ë¶ˆí•©ê²©ì…ë‹ˆë‹¤.`,
  true,
  false
);
</script>

</body>
</html>
